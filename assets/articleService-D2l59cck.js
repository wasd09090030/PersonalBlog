import"./index-BvN9veIB.js";class o{constructor(){this.baseURL="http://localhost:3000"}async getArticles(t){try{let r=`${this.baseURL}/articles`;t&&(r+=`?category=${t}`);const e=await fetch(r);if(!e.ok)throw new Error("获取文章失败");return await e.json()}catch(r){throw console.error("获取文章失败:",r),r}}async getArticlesByCategory(t){try{const r=await fetch(`${this.baseURL}/articles/category/${t}`);if(!r.ok)throw new Error("获取分类文章失败");return await r.json()}catch(r){throw console.error(`获取${t}分类文章失败:`,r),r}}async getArticleById(t){try{const r=await fetch(`${this.baseURL}/articles/${t}`);if(!r.ok)throw new Error("获取文章失败");return await r.json()}catch(r){throw console.error("获取文章失败:",r),r}}async createArticle(t){try{const r=await fetch(`${this.baseURL}/articles`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.getAuthHeader()},body:JSON.stringify(t)});if(!r.ok)throw new Error("创建文章失败");return await r.json()}catch(r){throw console.error("创建文章失败:",r),r}}async updateArticle(t,r){try{const e=await fetch(`${this.baseURL}/articles/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:this.getAuthHeader()},body:JSON.stringify(r)});if(!e.ok)throw new Error("更新文章失败");return await e.json()}catch(e){throw console.error("更新文章失败:",e),e}}async deleteArticle(t){try{if(!(await fetch(`${this.baseURL}/articles/${t}`,{method:"DELETE",headers:{Authorization:this.getAuthHeader()}})).ok)throw new Error("删除文章失败");return!0}catch(r){throw console.error("删除文章失败:",r),r}}getAuthHeader(){return localStorage.getItem("isAuthenticated")==="true"?"AdminToken":""}}const c=new o;export{c as a};
